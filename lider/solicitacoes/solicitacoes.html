<!DOCTYPE html>
<html lang="pt">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/lider/solicitacoes/solicitacoes.css">
    <title>SIGAM</title>
    <script src="https://kit.fontawesome.com/235f8c027b.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>

<body>

    <!-- Navbar -->
    <div class="navbar">
        <a href="#" class="navbar-brand">
            <img src="/lider/home/logoIBB.png" alt="Logo" class="logo">
        </a>
        <div class="nav-links" id="navLinks">
            <a href="/lider/home/home.html">Home</a>
            <a href="#">Escala</a>
            <a href="/lider/login/login.html"><i class="fa-solid fa-right-from-bracket" style="color: #ffffff;"></i></a>
        </div>
        <!-- Dropdown button for mobile -->
        <div class="dropdown">
            <button class="dropbtn" onclick="toggleMenu()">
                <i class="fa fa-bars"></i>
            </button>
            <div class="dropdown-content" id="dropdownMenu">
                <a href="#">Home</a>
                <a href="#">Escala</a>
                <a href="/lider/login/login.html"><i class="fa-solid fa-right-from-bracket"></i></a>
            </div>
        </div>
    </div>

    <!-- INSIRA O CONTEÚDO -->
    <div>
        <h1>Solicitações</h1>
        <div class="outer-container">
            <div class="container">
                <table>
                    <thead>
                        <tr>
                            <th>Nome</th>
                            <th>Atividade</th>
                            <th>Restrições</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><input type="checkbox">Carlos</td>
                            <td>Tocar Bateria</td>
                            <td>Sex 18:00 - 20:00</td>
                        </tr>
                        <tr>
                            <td><input type="checkbox">Pedro</td>
                            <td>Tocar Violão</td>
                            <td>Sab 14:00 - 19:00<br>Dom 12:00 - 18:00</td>
                        </tr>
                        <tr>
                            <td><input type="checkbox">Emily</td>
                            <td>Contar</td>
                            <td>Dom 07:00 - 12:00</td>
                        </tr>
                    </tbody>
                </table>
                <div class="button-container">
                    <a href="/lider/ver-membros/ver-membros.html"><button id="backButton">Voltar</button></a>
                    <div class="action-buttons">
                        <button id="addMemberButton" disabled>Aceitar</button>
                        <button id="rejectMemberButton" disabled>Recusar</button>
                    </div>
                </div>           
            </div>
        </div>
    </div>

    <script>
        function toggleMenu() {
            var x = document.getElementById("dropdownMenu");
            if (x.style.display === "block") {
                x.style.display = "none";
            } else {
                x.style.display = "block";
            }
        }

        const checkboxes = document.querySelectorAll('input[type="checkbox"]');
        const addMemberButton = document.getElementById('addMemberButton');
        const rejectMemberButton = document.getElementById('rejectMemberButton');

        function updateButtonsState() {
            const isAnyChecked = Array.from(checkboxes).some(checkbox => checkbox.checked);
            addMemberButton.disabled = !isAnyChecked; 
            rejectMemberButton.disabled = !isAnyChecked; 
        }

        checkboxes.forEach(checkbox => {
            checkbox.addEventListener('change', updateButtonsState);
        });

        addMemberButton.addEventListener('click', function () {
            const selectedMembers = Array.from(checkboxes)
                .filter(checkbox => checkbox.checked)
                .map(checkbox => checkbox.parentElement.textContent.trim());

            Swal.fire({
                title: 'Sucesso!',
                text: `Solicitação de ${selectedMembers.join(', ')} aceita!`,
                icon: 'success',
                confirmButtonText: 'OK'
            }).then((result) => {
                if (result.isConfirmed) {
                    selectedMembers.forEach(member => {
                        checkboxes.forEach(checkbox => {
                            if (checkbox.checked && checkbox.parentElement.textContent.trim() === member) {
                                checkbox.closest('tr').remove(); 
                            }
                        });
                    });
                    updateButtonsState(); 
                }
            });
        });

        rejectMemberButton.addEventListener('click', function () {
            const rejectedMembers = Array.from(checkboxes)
                .filter(checkbox => checkbox.checked)
                .map(checkbox => checkbox.parentElement.textContent.trim());

            Swal.fire({
                title: 'Membro Recusado!',
                text: `Solicitação de ${rejectedMembers.join(', ')} recusada!`,
                icon: 'warning',
                confirmButtonText: 'OK'
            }).then((result) => {
                if (result.isConfirmed) {
                    rejectedMembers.forEach(member => {
                        checkboxes.forEach(checkbox => {
                            if (checkbox.checked && checkbox.parentElement.textContent.trim() === member) {
                                checkbox.closest('tr').remove(); 
                            }
                        });
                    });
                    updateButtonsState();
                }
            });
        });
    </script>
</body>
</html>
